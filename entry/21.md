# EditorConfig でエディタの設定も共有しよう

![](http://hageee.net/p/20130425/img1.png)


標準化して共有しまくる流れが加速しまくる昨今、
去年ぐらいからエディターの設定も共有しよう！という流れが始まっていたようです。


>  EditorConfig ― [http://editorconfig.org](http://editorconfig.org)

この EditorConfig という規格では、
プロジェクト内でプログラムやプリコンパイラ言語を正しく動作させるために
最低限必要な設定を「エディタをまたいで」共有するための規格です。'

## meta

- slug: 21
- date: 2013-04-25 10:17:00
- active: true


## content

## 何が重要なのか

その最低限必要な設定を共有することの何が重要かというと、  
言語の記述ルールにまつわるトラブルを未然に防ぐことが出来る  
ということだと思います。

python は元々ですが、CoffeeScript、Slim、jade、Sass など  
ここ最近はインデントをベースとしたプログラム言語なりマークアップ言語が  
よく話題に登るようになりましたね。  
そういった言語ではエディタのインデント設定一つとっても  
正常にコンパイルできないなど、トラブルの原因になりかねないため  
チームで使用するには十分注意を払う必要があると思います。

「そんなこと〇〇言語をいじる上では常識でしょ?」  
とあなたが思っていても、残念ながらそんなこと気にしてすらいない人もいるのは事実です。  
もしくは、「そんなこと仕様書に書いてありました?」となんだかゆとりある回答が得られるかもしれません。  
マサカリ投げても相手に効果がなければ投げ損でしかないですね。  
遊びならともかく、仕事だとたまったもんじゃありません。

というか既にそんなトラブルの話をいくつか聞いていたり。

それだけならまだしも、エディタの文字コード設定が間違っていて〜というトラブルが  
未だに消えないという驚愕の事実を定期的に耳にします。

とはいえ最近プログラムなり Web な世界に入ったりした人からすれば  
確かに文字コードは鬼門の一つだったりすると思うので、  
その辺りが楽に共有化できるとしたら素敵なことではないでしょうか。

## IDE の設定共有と何が違うのか

もちろん最近の IDE やちょっと高級なエディタとなると  
インデントや文字コードなど、言語ごとの設定を含め  
エディタの設定を出力、共有することができます。  
しかし、当たり前といえば当たり前ですがその設定を  
他の IDE やエディタに同じ設定を適用することができません。

EditorConfig は、プロジェクト内で  
対象とする言語を正しく動作させるために  
エディタをまたいで必要な情報だけ共有することを目的としています。

逆にシンタックスハイライトのカラーリングや、  
補完辞書、キーバインディングなど  
プログラムを正しく動作させるためにとっては「どうでもいい」ことは共有しません。

各種エディタにとって実装しやすいシンプルな規格を定義しているだけあって  
既にいくつかのエディタではプラグインが作られています。

これによって、プロジェクトの途中で人出が足りなくなったので  
フリーランスや新しい人をアサインしたい、しかしプロジェクトで使っている有償でいい金額のする IDE を  
新しい人の文ライセンスを買う負担が…という懸念がすこしでも軽減できるようになるのではないでしょうか。

## 対応しているエディタ

現在、公式サイトでは以下のエディタが対応していることがアナウンスされています。

* Code::Blocks
* Emacs
* Geany
* Gedit
* jEdit* Notepad++
* Sublime Text 2
* TextMate
* Vim
* Visual Studio

よく耳にするような環境はだいたい揃っていますね。  
さり気なく Visual Studio が対応しているのが地味にポイントが高いと思っています。  
Eclips 系も時間の問題だといいなと思っています。

僕のメイン環境は Sublime Text なのですが  
`Package Controll: Install Package` -> `Editor Config` とするだけでプラグインがインストールされます。

## 設定例

さて、無駄に偉そうな前置きが大分長かったですがようやく EditorConfig のサンプルを。

<script src="https://gist.github.com/glassesfactory/938744cbe3ea78f801c6.js"></script>

この `.editorconfig` というファイルをプロジェクトのルートディレクトリに突っ込んでおくことで  
対応したエディタならば指定した設定で対象ファイルを書くことができます。

## 対象ファイル指定の方法


先ほどの設定例でおおよその察しは付いていると思いますが。



* 特定の拡張子
    `[*.py]`
    `[*.coffee]`

よくあるアスタリスクによる指定でできます。

* 特定ディレクトリのみ
    `[libs/**.js]`
    `[path/to/file/**.html]`

特定ディレクトリの特定拡張子にのみ設定を反映したい場合は  
アスタリスクを2つ付ける必要が有るようです。

* ファイル指定
    `[.gitignore]`
    `[conf.ini]`

地味にカオスな .ini ファイルの指定も  
ファイル名を直接指定することでピンポイントで設定を反映することができます。

他にもこのファイルには反映させないなど細かい設定が出来るようです。  
より詳しい対象の絞り込みは[公式のドキュメント](http://editorconfig.org/#file-format-details)を見てみると良いと思います。

## 設定項目


公式からの引用ですが、  
以下の項目を設定することができます。

* indent_style
    スペースかタブか、インデントのスタイルを設定出来ます。
    **例:** `indent_style = space`
* indent_size
    インデントで使用するスペースの数を設定出来ます。python ならばスペース4ですね。
    **例:** `indent_size = 4`
* tab_width
    インデントでタブを指定した場合、1タブあたりのサイズ(なんスペース分か)を設定出来ます。
* end_of_line
    改行コードを設定出来ます。
* charset
    文字コードを設定出来ます。
* trim_trailing_whitespace
    余分なスペースやタブなどを削除してくれるらしいです。(マジで?)
* insert_final_newline
 ファイルの一番最後に空の1行を挿入します。サーバー系の設定ファイルだとたまにこれが原因で動いたり動かなかったりするのでありがたいですね。
 * root
     プロジェクトのルートかどうか。

## 試してみた

さて、ひと通りどんな設定項目があるのか  
羅列してみましたが、実際どんな挙動を示すのか、  
キャプチャを用意してみました。まずは `.editorconfig` が設置されていない環境です。  
一応このキャプチャのために、ファイルフォーマット周りの設定は初期化してみました。

試しに python ファイルを作成してみます。

![](http://hageee.net/p/20130425/img2.png)

インデントがタブ文字だわ、最後に改行が無いわで PEP8 先生(python のシンタックスにまつわる標準規格)が激怒してますね。  
このままじゃマサカリが飛んできます。

次に CoffeeScript ファイルを作成してみます。

![](http://hageee.net/p/20130425/img3.png)

こちらもインデントがタブ文字になっていますね。  
コンパイラの設定がストリクトだとコンパイルされずにエラーが出たりします。  
このあたりで自分がチームリーダーだと新人君に呼ばれる頃です。では、 `.editorconfig` ファイルを用意してみましょう。

![](http://hageee.net/p/20130425/img4.png)

python はインデントスタイルをスペースに、インデントサイズは4に設定しました。  
CoffeeScript はインデントスタイルをスペースに、ついでに試しに無駄なスペースを削除するように設定してみました。この状態で python ファイルをもう一度作成してみます。

![](http://hageee.net/p/20130425/img5.png)

ちゃんとインデントスタイルがスペースに、インデントサイズが4になりましたね。  
ついでに cmd + s で保存した際、自動で最後の改行が追加されました。

続いて CoffeeScript ファイルをもう一度作成してみます。

![](http://hageee.net/p/20130425/img6.png)

こちらもインデントスタイルがスペースに、インデントサイズが2になりました。  
実験として、意図的に無駄なスペースを突っ込んでみました。  
この状態で cmd + s で保存してみます。

![](http://hageee.net/p/20130425/img7.png)

不要なスペースが消えましたね！  
この設定は `[*]` グローバルな設定にしても良いと思います。

---------------------------------

わりともう EditorConfig の日本語訳になれるんじゃねーか(自画自賛)ぐらい書いてみましたが  
これでもうファイルの記述ルールにまつわるトラブルも
標準化されてねぇじゃねぇかヒャッハー！とマサカリを投げてくるモヒカンも怖くありませんね！

EditorConfig がこれからのデファクトスタンダードになる！  
と僕も別にそんな意気込んでるわけではないです。
ただ、こういう細かいけど状況によっては致命的になりかねないトラブルを
予防できるような規格や取り組みがある事自体が重要だなぁと思っています。
なので、今後 EditorConfig が結局流行らなかったとしても
似たような動きが継続していけばいいなと思います。

僕も早速管理しているいくつかのリポジトリに .editorconfig ファイルを追加してみました。  
fork してツッコミを入れてくださる時、  
少しでも余計なトラブルが減らせればと思います。
